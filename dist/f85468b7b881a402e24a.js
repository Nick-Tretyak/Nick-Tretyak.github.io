import"./index.html";import"./style.css";let input=document.querySelectorAll("input");const start__game=document.querySelector(".start__game"),changeName=document.querySelector(".change__name"),back=document.querySelector("#back"),game=document.querySelector("#game"),scoreboard=document.querySelector(".game-score__content");let player1=document.querySelector(".player1").value,player2=document.querySelector(".player2").value;const block=document.querySelector(".block"),buttons=document.querySelector(".buttons");let player=document.querySelector(".player2");const clear=document.querySelector(".clear"),new__game=document.querySelector(".new__game");let player1__score=document.querySelector(".player1-count"),player2__score=document.querySelector(".player2-count"),LS=sessionStorage.getItem("player1"),LS2=sessionStorage.getItem("player2"),currentPlayer="X";const myInput1=document.getElementById("inputChek1"),myInput2=document.getElementById("inputChek2"),savedGame=sessionStorage.getItem("game");if(savedGame)document.querySelector("#game").innerHTML=savedGame,currentPlayer=sessionStorage.getItem("currentPlayer");else for(let e=0;e<9;e++)document.querySelector("#game").innerHTML+='<div class="block"></div>';document.querySelector("#game").onclick=function(e){"block"==e.target.className&&""==e.target.innerHTML&&(e.target.innerHTML=currentPlayer,currentPlayer="X"===currentPlayer?"O":"X",checkWinner(),sessionStorage.setItem("game",document.querySelector("#game").innerHTML),sessionStorage.setItem("currentPlayer",currentPlayer))};let count=0;sessionStorage.getItem("score1")&&(count=parseInt(sessionStorage.getItem("score1"))),player1__score.innerHTML=count;let play=function(){count+=1,player1__score.innerHTML=count,sessionStorage.setItem("score1",count),console.log(count)},count2=0;sessionStorage.getItem("score2")&&(count2=parseInt(sessionStorage.getItem("score2"))),player2__score.innerHTML=count2;let play2=function(){count2+=1,player2__score.innerHTML=count2,sessionStorage.setItem("score2",count2),console.log(count2)};function checkWinner(){const e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],r=document.querySelectorAll(".block"),t=e.some((e=>e.every((e=>"X"===r[e].innerHTML)))),o=e.some((e=>e.every((e=>"O"===r[e].innerHTML)))),n=Array.from(r).every((e=>""!==e.innerHTML));t?(Swal.fire({title:"Победитель "+(null==LS?player1:player1||LS),showConfirmButton:!1,timer:1e3}),play(),clear.onclick()):o?(Swal.fire({title:"Победитель "+(null==LS2?player2:player2||LS2),showConfirmButton:!1,timer:1e3}),play2(),clear.onclick()):n&&(Swal.fire({title:"Ничья",showConfirmButton:!1,timer:1e3}),clear.onclick())}start__game.addEventListener("click",(function(){""===myInput1.value.trim()||""===myInput2.value.trim()?Swal.fire({title:"Введите имена игроков",showConfirmButton:!1,timer:1500}):(player1=document.querySelector(".player1").value,player2=document.querySelector(".player2").value,document.querySelector(".scoreTable").innerHTML=player1+":",document.querySelector(".scoreTable2").innerHTML=player2+":",buttons.style.display="block",back.style.display="none",game.style.display="block",scoreboard.style.display="block",console.log(player1),console.log(player2),sessionStorage.setItem("player1",player1),sessionStorage.setItem("player2",player2))})),clear.onclick=function(){currentPlayer="X",game.innerHTML="";for(let e=0;e<9;e++)document.querySelector("#game").innerHTML+='<div class = "block"></div>';sessionStorage.removeItem("game",document.querySelector("#game").innerHTML),sessionStorage.removeItem("currentPlayer",currentPlayer)},new__game.onclick=function(){currentPlayer="X",count=!1,count2=!1,player1__score.innerHTML="0",player2__score.innerHTML="0",game.innerHTML="";for(let e=0;e<9;e++)document.querySelector("#game").innerHTML+='<div class = "block"></div>';sessionStorage.removeItem("score1",count),sessionStorage.removeItem("score2",count2),sessionStorage.removeItem("game",document.querySelector("#game").innerHTML),sessionStorage.removeItem("currentPlayer",currentPlayer)},changeName.onclick=function(){buttons.style.display="none",back.style.display="block",game.style.display="none",scoreboard.style.display="none",sessionStorage.removeItem("player1",player1),sessionStorage.removeItem("player2",player2),new__game.onclick()},null!==LS&null!==LS2&&(document.querySelector(".scoreTable").innerHTML=LS+":",document.querySelector(".scoreTable2").innerHTML=LS2+":",buttons.style.display="block",back.style.display="none",game.style.display="block",scoreboard.style.display="block");